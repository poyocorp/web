<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Database Setup — Poyoweb</title>
  <style>
    :root{ --bg:#fff7cf; --card:#ffffff; --accent:#2274a5; --mono: #0b1021 }
    body{ font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); margin:0; color:var(--mono) }
    header{ background:linear-gradient(90deg,#ffea8a 0%, #ffe96b 100%); padding:28px 20px; box-shadow:0 4px 14px rgba(0,0,0,0.06) }
    header h1{ margin:0; font-size:28px; font-weight:700 }
    .container{ max-width:960px; margin:22px auto; padding:20px }
    .card{ background:var(--card); border-radius:12px; padding:18px; box-shadow:0 8px 30px rgba(17,24,39,0.06); }
    h2{ margin:0 0 12px; font-size:20px }
    p.lead{ margin:6px 0 18px; color:#444 }
    pre{ background:#0b1021; color:#d8ffd6; padding:14px; border-radius:8px; overflow:auto; position:relative }
    code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace; font-size:13px }
    .row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap }
    .muted{ color:#666 }
    .meta{ display:flex; justify-content:space-between; gap:12px; align-items:center; margin-bottom:12px }
    .btn{ background:var(--accent); color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer }
    .btn.ghost{ background:transparent; color:var(--accent); border:1px solid rgba(34,116,165,0.12) }
    .note{ margin-top:12px; font-size:13px; color:#555 }
    .foot{ margin-top:18px; font-size:13px; color:#555 }
    .copy-btn{ position:absolute; right:12px; top:12px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.06); color:#fff; padding:6px 8px; border-radius:6px; cursor:pointer }
    @media (max-width:640px){ header h1{ font-size:20px } }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Database Setup — Poyoweb</h1>
      <p class="lead">Step-by-step instructions to create the MySQL database and enable MySQL support for the site.</p>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="meta">
        <h2>1) Create database & user</h2>
        <div class="row"><button class="btn" onclick="document.getElementById('cmd-create-db').scrollIntoView({behavior:'smooth'})">View</button></div>
      </div>
      <pre id="cmd-create-db"><button class="copy-btn" data-target="cmd-create-db">Copy</button><code>
CREATE DATABASE poyoweb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'poyoweb_user'@'127.0.0.1' IDENTIFIED BY 'choose_a_strong_password';
GRANT ALL PRIVILEGES ON poyoweb.* TO 'poyoweb_user'@'127.0.0.1';
FLUSH PRIVILEGES;
      </code></pre>
      <p class="note">Run these commands as a privileged MySQL user (e.g. via `mysql -u root -p`). Replace host, user and password to fit your environment.</p>
    </section>

    <div style="height:12px"></div>

    <section class="card">
      <div class="meta">
        <h2>2) Apply the schema</h2>
        <div class="row"><button class="btn" onclick="document.getElementById('cmd-apply-schema').scrollIntoView({behavior:'smooth'})">View</button></div>
      </div>
      <pre id="cmd-apply-schema"><button class="copy-btn" data-target="cmd-apply-schema">Copy</button><code>
mysql -u root -p poyoweb < sql/schema.sql
      </code></pre>
      <p class="note">This imports tables defined in <code>sql/schema.sql</code> into the <code>poyoweb</code> database.</p>
    </section>

    <div style="height:12px"></div>

    <section class="card">
      <div class="meta">
        <h2>3) Configure the app (optional)</h2>
        <div class="row"><span class="muted">This site is distributed without server-side PHP enabled. If you later add a backend, create a configuration file on the server.</span></div>
      </div>
      <pre id="cmd-config"><button class="copy-btn" data-target="cmd-config">Copy</button><code>
    # If you add a PHP backend later, create a server-side config.php with your DSN and credentials.
      </code></pre>
      <p class="note">This distribution does not include server-side config files. Use the static admin at <a href="/admin.html">admin.html</a> to edit data locally.</p>
    </section>

    <div style="height:12px"></div>

    <section class="card">
      <div class="meta">
        <h2>4) Initialize admin</h2>
        <div class="row"><a class="btn" href="admin.html">Open Admin (static)</a></div>
      </div>
      <p class="note">Visit <code>/admin.html</code> to open the static editor. To persist changes to the server, download the JSON from that editor and upload it to <code>data/stuff.json</code>.</p>
    </section>

    <div style="height:12px"></div>

    <section class="card">
      <h2>Notes & tips</h2>
      <ul>
        <li class="muted">Fallback: if DB is not configured, the app continues to use JSON files in <code>data/</code>.</li>
        <li class="muted">Permissions: ensure PHP can read <code>config.php</code> and (if you use JSON fallback) that the webserver user can write <code>data/</code>.</li>
        <li class="muted">Security: run the site over HTTPS and keep config credentials out of version control.</li>
      </ul>
      <p class="foot">Need a small script to seed example items or an API endpoint for the frontend? I can add that next.</p>
    </section>
  </main>

  <script>
    // Copy button handler for the pre blocks
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', async (e) => {
        const id = btn.getAttribute('data-target');
        const pre = document.getElementById(id);
        if (!pre) return;
        const code = pre.querySelector('code').innerText.trim();
        try{
          await navigator.clipboard.writeText(code);
          btn.textContent = 'Copied!';
          setTimeout(()=>btn.textContent='Copy',1500);
        }catch(err){
          btn.textContent = 'Copy';
        }
      });
    });
  </script>
</body>
</html>
